(function(){"use strict";var e={16:function(e,t,r){var n=r(9242),o=r(3396),a=r(7139);const i={class:"wrapper"},s=(0,o._)("span",null,null,-1),u=(0,o._)("span",null,null,-1),c=(0,o._)("span",null,null,-1),l=[s,u,c],f=(0,o._)("li",null,[(0,o._)("a",{href:""},"Contact")],-1);function g(e,t,r,n,s,u){const c=(0,o.up)("router-link"),g=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",null,[(0,o._)("div",i,[(0,o._)("div",{onClick:t[0]||(t[0]=(...e)=>u.toggleActive&&u.toggleActive(...e)),id:"toggler-icon"},l),(0,o._)("ul",{id:"nav",class:(0,a.C_)(u.activeClass)},[(0,o._)("li",null,[(0,o.Wm)(c,{to:"/",class:"text-dark nav-link"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(c,{to:"/about",class:"text-dark nav-link"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1})]),f],2)])]),(0,o.Wm)(g)],64)}var h={data:function(){return{active:!1}},methods:{toggleActive:function(){this.active=!this.active}},computed:{activeClass:function(){return this.active?"active":""}}},d=r(89);const b=(0,d.Z)(h,[["render",g]]);var v=b,p=r(2483);const m={id:"results"},k={class:"wrapper"},P={key:0,class:"alert alert-success"},y={key:1,class:"alert alert-danger"},w={class:"wrapper",id:"books"},_={key:0,class:"wrapper pagination"};function C(e,t,r,n,i,s){const u=(0,o.up)("SearchForm"),c=(0,o.up)("BookCard"),l=(0,o.up)("Paginator");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o.Wm)(u,{onSearchClicked:s.getData},null,8,["onSearchClicked"]),(0,o._)("section",m,[(0,o._)("div",k,[e.totalBooks?((0,o.wg)(),(0,o.iD)("div",P,' Results "'+(0,a.zw)(e.query)+'" : '+(0,a.zw)(e.totalBooks)+", page "+(0,a.zw)(e.currentPage+1),1)):(0,o.kq)("",!0),e.error?((0,o.wg)(),(0,o.iD)("div",y,(0,a.zw)(e.errorMessage),1)):(0,o.kq)("",!0)]),(0,o._)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.books,((e,t)=>((0,o.wg)(),(0,o.j4)(c,{key:t,book:e},null,8,["book"])))),128))]),s.paginationRequired?((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(l,{query:e.query,totalPages:e.totalPages,currentPage:e.currentPage,onGetPage:s.getData},null,8,["query","totalPages","currentPage","onGetPage"])])):(0,o.kq)("",!0)])])}const O={id:"search"},q={class:"wrapper"},j={action:"",id:"search-form"};function D(e,t,r,a,i,s){return(0,o.wg)(),(0,o.iD)("section",O,[(0,o._)("div",q,[(0,o._)("form",j,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t)},null,512),[[n.nr,e.query]]),(0,o._)("button",{onClick:t[1]||(t[1]=(0,n.iM)(((...e)=>s.search&&s.search(...e)),["prevent"]))},"Search")])])])}var S={name:"SearchForm",data:()=>({query:"",offset:0}),methods:{search:function(){this.$.emit("searchClicked",this.query,this.offset)},sanitizeQuery:function(){}}};const B=(0,d.Z)(S,[["render",D]]);var W=B;const x={class:"book"},M=["src"],$={class:"book-title"},A=(0,o._)("a",{href:"#",class:"book-btn"},"Voir",-1);function F(e,t,r,n,i,s){return(0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("img",{src:s.cover,class:"book-img"},null,8,M),(0,o._)("h5",$,(0,a.zw)(r.book.title),1),A])}var T={name:"BookCard",props:{book:Object},computed:{subjects:function(){for(var e=[],t=0,r=0;this.book.subject.length,t<3;r++)this.book.subject[r].length<10&&(e[t]=this.book.subject[r],t++);return e},cover:function(){var e=[{name:"isbn",value:null},{name:"oclc",value:null},{name:"lccn",value:null}];e[0].value=!!this.book.isbn&&this.book.isbn[0],e[1].value=!!this.book.oclc&&this.book.oclc[0],e[2].value=!!this.book.lccn&&this.book.lccn[0];for(var t=0;t<e.length;t++)if(e[t].value)return`https://covers.openlibrary.org/b/${e[t].name}/${e[t].value}-M.jpg`},image:function(){!!this.book.cover_i&&this.book.cover_i}}};const z=(0,d.Z)(T,[["render",F]]);var N=z;const E={id:"pagination-bar"},H=["onClick"];function I(e,t,r,n,i,s){return(0,o.wg)(),(0,o.iD)("ul",E,[(0,o._)("li",{class:(0,a.C_)(s.disableIfFirst()),onClick:t[0]||(t[0]=e=>s.getPreviousPage())},"«",2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.Pages,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t,class:(0,a.C_)(s.activeIfCurrent(e)),onClick:t=>s.getPage(e)},(0,a.zw)(t+1),11,H)))),128)),(0,o._)("li",{class:(0,a.C_)(s.disableIfLast()),onClick:t[1]||(t[1]=e=>s.getNextPage())},"»",2)])}var Z={name:"PaginationBar",emits:["getPage"],data:function(){return{numberOfPagesWanted:10,booksPerPage:null,lastOffset:null}},props:{query:String,currentPage:Number,totalPages:Number},methods:{activeIfCurrent:function(e){var t=e==this.currentPage?"active":"";return t},disableIfFirst:function(){var e=0==this.currentPage?"disable":"";return e},disableIfLast:function(){var e=this.currentPage==this.Pages.pop()?"disable":"";return e},getPage:function(e){this.$.emit("getPage",this.query,e)},getPreviousPage:function(){if(0!=this.currentPage){var e=this.currentPage-this.booksPerPage;this.$.emit("getPage",this.query,e)}else console.log("error")},getNextPage:function(){if(this.currentPage!=this.lastOffset){var e=this.currentPage+this.booksPerPage;this.$.emit("getPage",this.query,e)}else console.log("error")}},computed:{Pages:function(){var e=Math.ceil(this.totalPages/this.numberOfPagesWanted);this.booksPerPage=e;var t,r=[];for(r[0]=0,t=1;t<this.numberOfPagesWanted;t++)r[t]=r[t-1]+e;this.lastOffset=r[t-1];var n,o=!1;for(t=0;t<this.numberOfPagesWanted;t++)r[t]==this.currentPage&&(o=!0);if(o)return r;for(t=0;t<this.numberOfPagesWanted-1;t++)if(this.currentPage>r[t]&&this.currentPage<r[t+1])break;for(n=this.numberOfPagesWanted;n>t;n--)r[n]=r[n-1];return r[t+1]=this.currentPage,r}}};const L=(0,d.Z)(Z,[["render",I]]);var R=L,U=r(4161),V={name:"HomeView",components:{SearchForm:W,Paginator:R,BookCard:N},data:function(){return{books:[],booksPerPage:100,currentPage:0,totalBooks:0,totalPages:[],query:"",error:!1}},computed:{paginationRequired:function(){return this.totalBooks>this.booksPerPage}},methods:{getData:function(e,t){console.log("getting offest",t),U.Z.get(`https://openlibrary.org/search.json?q=${e}&offset=${t}&limit${this.booksPerPage}`).then((e=>{this.books=e.data.docs,this.currentPage=e.data.offset,this.totalBooks=e.data.numFound,this.query=e.data.q,this.totalPages=Math.ceil(this.totalBooks/this.booksPerPage),this.error=!1})).then((function(){var e=window.innerHeight;window.scrollTo({top:e,behavior:"smooth"})})).catch((e=>{this.error=!0,this.errorMessage=e.message}))}}};const Y=(0,d.Z)(V,[["render",C]]);var G=Y;const K=[{path:"/",name:"home",component:G},{path:"/about",name:"about",component:()=>r.e(443).then(r.bind(r,833))}],Q=(0,p.p7)({history:(0,p.PO)("/"),routes:K});var J=Q;(0,n.ri)(v).use(J).mount("#app")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,a){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],a=e[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,o,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/about.1d4b5b2b.js"}}(),function(){r.miniCssF=function(e){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="library-app:";r.l=function(n,o,a,i){if(e[n])e[n].push(o);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+a),s.src=n),e[n]=[o];var g=function(t,r){s.onerror=s.onload=null,clearTimeout(h);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var e={143:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=e[t]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(t),s=new Error,u=function(n){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};r.l(i,u,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],s=n[1],u=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},n=self["webpackChunklibrary_app"]=self["webpackChunklibrary_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(16)}));n=r.O(n)})();
//# sourceMappingURL=app.ac6de339.js.map